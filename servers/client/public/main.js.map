{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./index.ts","webpack:///./modules/modules.ts","webpack:///./src/Game.ts","webpack:///./src/config.ts","webpack:///./src/controller/Controller.ts","webpack:///./src/engine/Engine.ts","webpack:///./src/engine/loops/Loop.ts","webpack:///./src/engine/loops/gameLoop/GameLoop.ts","webpack:///./src/engine/loops/previewLoop/PreviewLoop.ts","webpack:///./src/entities/Entity.ts","webpack:///./src/entities/actors/Actor.ts","webpack:///./src/entities/actors/Hero/Hero.ts","webpack:///./src/entities/actors/Hero/supplements/moves.ts","webpack:///./src/entities/actors/NPC/Enemy/Enemy.ts","webpack:///./src/entities/actors/NPC/Friend/Friend.ts","webpack:///./src/entities/actors/Player/Player.ts","webpack:///./src/entities/actors/supplements/_addScript.ts","webpack:///./src/entities/actors/supplements/_interact.ts","webpack:///./src/entities/actors/supplements/_interpolate.ts","webpack:///./src/entities/actors/supplements/_navigate.ts","webpack:///./src/entities/actors/supplements/_pointerOut.ts","webpack:///./src/entities/actors/supplements/_pointerOver.ts","webpack:///./src/entities/actors/supplements/_removeScript.ts","webpack:///./src/entities/actors/supplements/_run.ts","webpack:///./src/entities/actors/supplements/_walk.ts","webpack:///./src/entities/actors/supplements/getSpriteTextures.ts","webpack:///./src/render/Renderer.ts","webpack:///./src/render/stack/Stack.ts","webpack:///./src/render/stack/states/BattleState/BattleState.ts","webpack:///./src/render/stack/states/ChatState/ChatState.ts","webpack:///./src/render/stack/states/FilterState/FilterState.ts","webpack:///./src/render/stack/states/GUI/GUI.ts","webpack:///./src/render/stack/states/GUI/HUD/HUD.ts","webpack:///./src/render/stack/states/GUI/HUD/bars/Character/Character.ts","webpack:///./src/render/stack/states/GUI/HUD/bars/Chat/Chat.ts","webpack:///./src/render/stack/states/GUI/HUD/bars/Chat/commands.ts","webpack:///./src/render/stack/states/GUI/HUD/bars/HUDelement.ts","webpack:///./src/render/stack/states/GUI/HUD/bars/Menu/Menu.ts","webpack:///./src/render/stack/states/GUI/HUD/bars/MiniMap/MiniMap.ts","webpack:///./src/render/stack/states/PlayState/PlayState.ts","webpack:///./src/render/stack/states/PlayState/supplements/_addScript.ts","webpack:///./src/render/stack/states/PlayState/supplements/_changeCamera.ts","webpack:///./src/render/stack/states/PlayState/supplements/_changeMap.ts","webpack:///./src/render/stack/states/PlayState/supplements/_checkPosition.ts","webpack:///./src/render/stack/states/PlayState/supplements/_interaction.ts","webpack:///./src/render/stack/states/PlayState/supplements/_pivot.ts","webpack:///./src/render/stack/states/PlayState/supplements/_playScripts.ts","webpack:///./src/render/stack/states/PlayState/supplements/_removeScript.ts","webpack:///./src/render/stack/states/PlayState/supplements/_resize.ts","webpack:///./src/render/stack/states/PlayState/supplements/_zoomCamera.ts","webpack:///./src/render/stack/states/StartState/StartState.ts","webpack:///./src/render/stack/states/StartState/assets/droplet.png","webpack:///./src/render/stack/states/StartState/dependencies/Particle.ts","webpack:///./src/render/stack/states/StartState/dependencies/Wave.ts","webpack:///./src/render/stack/states/State.ts","webpack:///./src/services/Services.ts","webpack:///./src/services/emit/EmitService.ts","webpack:///./src/services/emit/Socket/Socket.ts","webpack:///./src/services/emit/Socket/messages/GET_NEW_PLAYER.ts","webpack:///./src/services/emit/Socket/messages/GET_PLAYERS.ts","webpack:///./src/services/emit/Socket/messages/PLAYER_DISCONNECTED.ts","webpack:///./src/services/emit/Socket/messages/PLAYER_MOVED.ts","webpack:///./src/services/setup/SetupService.ts","webpack:///./src/services/setup/supplements/_build.ts","webpack:///./src/services/setup/supplements/_createLocations.ts","webpack:///./src/services/setup/supplements/_createTextures.ts","webpack:///./src/services/setup/supplements/_loadMaps.ts","webpack:///./src/services/setup/supplements/_loadPlayer.ts","webpack:///./src/services/setup/supplements/_loadPreviewAsset.ts","webpack:///./src/services/setup/supplements/_loadTilesets.ts","webpack:///./src/services/status/StatusService.ts","webpack:///./src/services/storage/StorageService.ts","webpack:///./src/style.scss?cf5e"],"names":["PIXI","settings","SCALE_MODE","SCALE_MODES","NEAREST","ROUND_PIXELS","tilemap","Constant","use32bitIndex","game","Game","setup","window","OutlineFilter","require","LeonSans","utils","randomizer","min","max","Math","random","selector","$canvas","document","querySelector","renderer","Renderer","stack","StateStack","engine","Engine","controller","Controller","services","Services","OPTIONS","addEventListener","resize","add","loops","preview","loop","start","loadPlayer","loadTilesets","loadMaps","createTextures","createLocations","build","PORTS","GAME","PROVIDER","STORE","GAME_OPTIONS","landscape","w","h","animated","portrets","actors","DEFAULT_ASSETS","tag","url","chatFocused","up","ButtonInput","down","left","right","shift","space","i","p","j","m","esc","event","type","keyCode","GUI","chatBar","send","getInput","hold","press","active","on","off","PreviewLoop","GameLoop","Ticker","Loop","name","constructor","scripts","bind","fn","id","push","filter","script","emit","socket","connected","console","log","playState","length","playScripts","map","actor","Object","values","player","target","moving","pivot","forEach","screen","render","stage","startState","interpolateProgress","drops","drop","update","bottom","waves","wave","Entity","description","texture","textureX","textureY","cell","x","y","position","collision","Actor","data","textures","getSpriteTextures","sprite","Sprite","standSouth","instance","interactive","buttonMode","pointerOver","pointerOut","portret","Texture","BaseTextureCache","Rectangle","speed","animation","direction","isTarget","isChatting","_pointerOver","_pointerOut","_interpolate","end","action","_navigate","_interact","_addScript","_removeScript","_run","_walk","Hero","outline","location","_up","_down","_left","_right","hero","scene","standNorth","API","JSON","stringify","newPosition","addScript","interpolate","standWest","standEast","Enemy","Friend","lines","click","Player","newCell","interpolation","interaction","animationStep","distX","distY","dx","sign","dy","abs","checkPosition","set","innerWidth","innerHeight","removeScript","setTimeout","navigate","path","pathFinding","navigation","step","terrain","Node","coordinate","parent","g","f","openSet","closedSet","current","nodes","reverse","neighbors","nodePosition","undefined","includes","neighbor","node","filters","keys","startX","startY","walkSouth","walkWest","walkEast","walkNorth","autoDetectRenderer","view","width","height","resolution","devicePixelRatio","WIDTH","HEIGHT","status","builded","HUD","display","Stage","sortableChildren","filterArea","PlayState","chatState","ChatState","battleState","BattleState","StartState","filterState","FilterState","addChild","State","EffectState","visible","character","Character","chat","Chat","menu","Menu","miniMap","MiniMap","HUDswitcherBtn","Graphics","beginFill","drawRect","endFill","HUDelement","input","TextInput","fontSize","padding","color","box","fill","rounded","stroke","focused","disabled","placeholder","text","commands","eval","slice","Container","graphics","inventoryBtn","questsBtn","achivementsBtn","menuBtn","actorsGroup","Group","zOrder","zoomX","zoomY","_pivot","_resize","zoom","_changeCamera","_zoomCamera","_checkPosition","_changeMap","_interaction","_playScripts","zoomCamera","adjacent","to","storage","locations","removeChildren","layers","after","before","lesson","entry","changeMap","changeTo","port","newMaps","_maps","dialogue","xOffset","yOffset","items","item","use","splice","indexOf","scale","round","targetOffsetX","targetOffsetY","stackRef","ParticleContainer","elevator","generateTexture","from","droplet","textureSize","characters","progress","addFilters","generateWave","setInterval","generateLetter","letter","leon","size","weight","isPath","tracking","posX","posY","paths","point","particle","Particle","availWidth","Wave","blurFilter","BlurFilter","blur","shader","threasholdFilter","Filter","setupProgress","gravity","bounce","mode","vx","vy","vxb","sin","options","history","StorageService","SetupService","EmitService","StatusService","Socket","provider","store","players","close","open","WebSocket","onmessage","e","onMessage","onopen","playerData","parse","message","GET_PLAYERS","GET_NEW_PLAYER","PLAYER_MOVED","PLAYER_DISCONNECTED","newPlayer","parentGroup","occupy","find","removeChild","move","_loadPreviewAsset","loader","xhrTypes","_loadPlayer","tilesets","_loadTilesets","maps","adjacentMaps","_loadMaps","_createTextures","_createLocations","_build","Loader","LoaderResource","XHR_RESPONSE_TYPE","BLOB","Layer","hide","remove","show","bindKeys","keyDownUp","Promise","resolve","json","props","properties","property","value","texturesArray","concat","source","c","r","afterLayer","CompositeRectTileLayer","beforeLayer","objects","layer","registerObject","temp","t","col","floor","row","addFrame","tilewidth","tileheight","cellX","cellY","assign","category","_tilesets","tileset","metadata","baseTexture","BaseTexture","orig","xhrType","load","_"],"mappings":"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","file":"main.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"main\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"vendors~main\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import '@modules'\n\n// Disable interpolation when scaling, will make texture be pixelated\nPIXI.settings.SCALE_MODE = PIXI.SCALE_MODES.NEAREST\nPIXI.settings.ROUND_PIXELS = true\n \n// \"1.000.000 < tiles\" possibility\nPIXI.tilemap.Constant.use32bitIndex = true\n   \nimport Game from '@/Game'\n\nexport const game = new Game('#canvas') \n\ngame.setup()\n","// PIXI with its dependencies\r\nimport * as PIXI from 'pixi.js'\r\nimport {OutlineFilter} from '@pixi/filter-outline';\r\nwindow.PIXI = PIXI\r\nwindow.PIXI.OutlineFilter = OutlineFilter\r\n\r\nrequire(\"pixi-tilemap\");\r\nrequire(\"pixi-layers\")\r\nrequire(\"pixi-text-input\")\r\n\r\nimport LeonSans from '@nindaff/leonsans'\r\nwindow.LeonSans = LeonSans\r\n\r\n//UTILS\r\nwindow.utils = {}\r\nwindow.utils.randomizer = (min: number, max: number) => min + (max - min)*Math.random()\r\n\r\n// stylesheet\r\nimport '@/style.scss'","import * as OPTIONS from '@/config'\r\n\r\nimport Renderer from '@/render/Renderer'\r\nimport StateStack from '@/render/stack/Stack'\r\nimport Engine from '@/engine/Engine'\r\nimport Controller from '@/controller/Controller'\r\nimport Services from '@/services/Services'\r\n\r\n\r\nexport default class Game {\r\n\r\n  $canvas: HTMLCanvasElement\r\n\r\n\r\n  /* PIXI Renderer */// -----------------------------------\r\n  renderer: Renderer\r\n\r\n  /* Game stack */// -----------------------------------\r\n  stack: StateStack\r\n\r\n  /* Frames generator */// -----------------------------------\r\n  engine: Engine\r\n\r\n  /* Controller */// -----------------------------------\r\n  controller: Controller\r\n\r\n  /* Services */// -----------------------------------\r\n  services: Services\r\n\r\n  constructor(selector: string) {\r\n\r\n    this.$canvas = <HTMLCanvasElement>document.querySelector(selector)\r\n\r\n\r\n    this.renderer   = new Renderer(this.$canvas)\r\n    \r\n    this.stack      = new StateStack(this.renderer)\r\n\r\n    this.engine     = new Engine()\r\n    \r\n    this.controller = new Controller()\r\n\r\n    this.services   = new Services(OPTIONS)\r\n\r\n  }\r\n\r\n  async setup() {\r\n\r\n    window.addEventListener('resize', () => this.renderer.resize())\r\n\r\n    this.engine.add(this.engine.loops.preview.loop)\r\n    this.engine.start()\r\n\r\n\r\n    // await new Promise((resolve) => {setTimeout(() => {resolve()}, 2000)})\r\n    await this.services.setup.loadPlayer()\r\n    // await new Promise((resolve) => {setTimeout(() => {\r\n    //   this.services.status.setupProgress += 20\r\n    //   resolve()\r\n    // }, 1000)})\r\n    \r\n    await this.services.setup.loadTilesets(OPTIONS.DEFAULT_ASSETS)\r\n    // await new Promise((resolve) => {setTimeout(() => {\r\n    //   this.services.status.setupProgress += 20\r\n    //   resolve()\r\n    // }, 1000)})\r\n    \r\n    await this.services.setup.loadMaps()\r\n    // await new Promise((resolve) => {setTimeout(() => {\r\n    //   this.services.status.setupProgress += 20\r\n    //   resolve()\r\n    // }, 1000)})\r\n    \r\n    await this.services.setup.createTextures()\r\n    // await new Promise((resolve) => {setTimeout(() => {\r\n    //   this.services.status.setupProgress += 20\r\n    //   resolve()\r\n    // }, 1000)})\r\n    \r\n    await this.services.setup.createLocations()\r\n    // await new Promise((resolve) => {setTimeout(() => {\r\n    //   this.services.status.setupProgress += 20\r\n    //   resolve()\r\n    // }, 1000)})\r\n    // await new Promise((resolve) => {setTimeout(() => {resolve()}, 2000)})\r\n    \r\n\r\n    await this.services.setup.build()\r\n    \r\n  }\r\n\r\n}\r\n","export const PORTS = {\r\n    GAME: 8080,\r\n    PROVIDER: 1111,\r\n    STORE: 5000\r\n}\r\n \r\nexport const GAME_OPTIONS = {\r\n    landscape:  { w: 16,  h: 16  },\r\n    animated:   { w: 16,  h: 16  },\r\n    portrets:   { w: 128, h: 128 },\r\n    actors:     { w: 26,  h: 36  },\r\n}\r\n\r\nexport const DEFAULT_ASSETS = [\r\n    {tag: 'terrain', url: `http://localhost:${PORTS.PROVIDER}/tilesets/landscape/terrain`},\r\n    {tag: 'outside', url: `http://localhost:${PORTS.PROVIDER}/tilesets/landscape/outside`},\r\n    {tag: 'world', url: `http://localhost:${PORTS.PROVIDER}/tilesets/landscape/world`},\r\n    {tag: 'water', url: `http://localhost:${PORTS.PROVIDER}/tilesets/landscape/water`},\r\n    {tag: 'desert', url: `http://localhost:${PORTS.PROVIDER}/tilesets/landscape/desert`},\r\n    {tag: 'house', url: `http://localhost:${PORTS.PROVIDER}/tilesets/landscape/house`},\r\n    {tag: 'castle', url: `http://localhost:${PORTS.PROVIDER}/tilesets/landscape/castle`},\r\n    {tag: 'dungeon', url: `http://localhost:${PORTS.PROVIDER}/tilesets/landscape/dungeon`},\r\n    {tag: 'inside', url: `http://localhost:${PORTS.PROVIDER}/tilesets/landscape/inside`},\r\n\r\n    {tag: 'doors', url: `http://localhost:${PORTS.PROVIDER}/tilesets/animated/doors`},\r\n    {tag: 'fireplace', url: `http://localhost:${PORTS.PROVIDER}/tilesets/animated/fireplace`},\r\n    {tag: 'torch', url: `http://localhost:${PORTS.PROVIDER}/tilesets/animated/torch`},\r\n    {tag: 'puzzle', url: `http://localhost:${PORTS.PROVIDER}/tilesets/animated/puzzle`},\r\n\r\n    {tag: 'fat', url: `http://localhost:${PORTS.PROVIDER}/tilesets/actors/fat`},\r\n\r\n    \r\n    {tag: 'male', url: `http://localhost:${PORTS.PROVIDER}/tilesets/portrets/male`},\r\n    {tag: 'female', url: `http://localhost:${PORTS.PROVIDER}/tilesets/portrets/female`},\r\n    {tag: 'mutual', url: `http://localhost:${PORTS.PROVIDER}/tilesets/portrets/mutual`},\r\n]","import { game } from \"@index\";\r\n\r\nexport default class Controller {\r\n\r\n    chatFocused: boolean\r\n\r\n    left: any; right: any; up: any; down: any\r\n\r\n    shift: any\r\n\r\n    space: any\r\n\r\n    i: any; p: any; j: any; m: any;\r\n\r\n    esc: any\r\n\r\n    constructor() {\r\n      this.chatFocused = false\r\n\r\n      this.up    = new ButtonInput()\r\n      this.down  = new ButtonInput()\r\n      this.left  = new ButtonInput()\r\n      this.right = new ButtonInput()\r\n\r\n      this.shift = new ButtonInput()\r\n      this.space = new ButtonInput()\r\n\r\n      this.i     = new ButtonInput()\r\n      this.p     = new ButtonInput()\r\n      this.j     = new ButtonInput()\r\n      this.m     = new ButtonInput()\r\n      this.esc   = new ButtonInput()\r\n  }\r\n\r\n  keyDownUp(event: any) {\r\n    let {type, keyCode} = event\r\n\r\n    if(this.chatFocused) {\r\n      if(keyCode === 13) game.stack.GUI.chatBar.send(); \r\n      return\r\n    }\r\n    \r\n    // console.log(keyCode)\r\n    let down = (type == \"keydown\") ? true : false\r\n    // console.log(keyCode)\r\n    \r\n    if(keyCode === 38 || keyCode === 87) this.up.getInput(down);\r\n    if(keyCode === 40 || keyCode === 83) this.down.getInput(down);\r\n    if(keyCode === 37 || keyCode === 65) this.left.getInput(down);\r\n    if(keyCode === 39 || keyCode === 68) this.right.getInput(down);\r\n\r\n    switch(keyCode) {\r\n\r\n      case 16: this.shift.hold(down);     break\r\n\r\n      case 32: this.space.press(down);    break\r\n\r\n\r\n      // interface\r\n      case 73: this.i.press(down);        break\r\n      case 80: this.p.press(down);        break\r\n      case 74: this.j.press(down);        break\r\n      case 77: this.m.press(down);        break\r\n      case 27: this.esc.press(down);      break\r\n    }\r\n\r\n\r\n    \r\n  }\r\n\r\n  bindKeys(){}\r\n}\r\n\r\nclass ButtonInput {\r\n    active: boolean; down: boolean\r\n  \r\n    on: any\r\n    off: any\r\n    constructor() {\r\n      this.active = this.down = false;\r\n  \r\n      this.on  = null\r\n      this.off = null\r\n    }\r\n  \r\n    getInput (down: any) {\r\n  \r\n      if (this.down != down) this.active = down;\r\n      this.down = down;\r\n  \r\n    }\r\n  \r\n    toggle (down: any) {\r\n      this.getInput(down)\r\n  \r\n      this.on()\r\n    }\r\n  \r\n    hold (down: any) {\r\n      this.getInput(down)\r\n  \r\n      if(this.active) this.on()\r\n      if(!this.active) this.off()\r\n    }\r\n  \r\n    press (down: any) {\r\n      if(down) this.on()\r\n    }\r\n  \r\n}\r\n","import PreviewLoop from '@/engine/loops/previewLoop/PreviewLoop'\r\nimport GameLoop from '@/engine/loops/gameLoop/GameLoop'\r\n\r\nexport default class Engine extends PIXI.Ticker {\r\n  loops: any\r\n\r\n  constructor() {\r\n    super()\r\n\r\n    this.loops = {\r\n      preview: new PreviewLoop(),\r\n      game:    new GameLoop()\r\n    }\r\n\r\n\r\n\r\n  }\r\n}","export default class Loop {\r\n  name: string\r\n  scripts: any[]\r\n\r\n  \r\n  constructor() {\r\n    this.name = this.constructor.name\r\n    this.scripts = []\r\n\r\n    this.loop = this.loop.bind(this)\r\n  }\r\n\r\n  implement(fn: Function, id: string) {\r\n    fn.id = id\r\n    this.scripts.push(fn)\r\n  }\r\n\r\n  remove(id: string) {\r\n    this.scripts = this.scripts.filter((script: Function) => script.id !== id)\r\n  }\r\n\r\n\r\n\r\n  loop() {}\r\n\r\n}","import {game} from '@index'\r\n\r\nimport Loop from '@/engine/loops/Loop'\r\n\r\n\r\nexport default class GameLoop extends Loop {\r\n\r\n  loop() {\r\n    if (!game.services.emit.socket.connected) return\r\n    console.log('game')\r\n\r\n    if(game.stack.playState.scripts.length) game.stack.playState.playScripts()\r\n\r\n    for(let actor of game.stack.playState.map.actors) {\r\n      if(actor.scripts.length) {\r\n        for(let script of actor.scripts) {\r\n          Object.values<any>(script)[0]()\r\n        }\r\n      }\r\n    }\r\n\r\n    if(game.controller.up.active)    game.stack.playState.player.up()\r\n    if(game.controller.down.active)  game.stack.playState.player.down()\r\n    if(game.controller.left.active)  game.stack.playState.player.left()\r\n    if(game.controller.right.active) game.stack.playState.player.right()\r\n\r\n    if(game.stack.playState.target.moving) game.stack.playState.pivot()\r\n\r\n    this.scripts.length ? this.scripts.forEach((script: any) => { script() }) : null\r\n\r\n    game.renderer.screen.render(game.stack.stage)\r\n\r\n  }\r\n\r\n}","import {game} from '@index'\r\n\r\nimport Loop from '@/engine/loops/Loop'\r\n\r\n\r\nexport default class PreviewLoop extends Loop {\r\n\r\n  loop() {\r\n    console.log('preview')\r\n\r\n    game.stack.startState.interpolateProgress()\r\n\r\n    game.stack.startState.drops.forEach((drop: any) => {\r\n      drop.update(game.stack.startState.bottom)\r\n    })\r\n\r\n    game.stack.startState.waves.forEach((wave: any) => {\r\n      wave.update(game.stack.startState.bottom)\r\n    })\r\n\r\n\r\n    this.scripts.length ? this.scripts.forEach((script: any) => { script() }) : null\r\n\r\n    game.renderer.screen.render(game.stack.stage)\r\n\r\n  }\r\n\r\n}\r\n\r\n","export default class Entity {\r\n    name: string\r\n\r\n    // transparent: boolean\r\n\r\n    texture: any\r\n    textureX: any\r\n    textureY: any\r\n\r\n    cell: any\r\n    position: any\r\n\r\n    constructor(description: any) {\r\n        this.name = description.name\r\n        \r\n        // this.transparent = description.transparent\r\n        this.texture = description.texture\r\n        this.textureX = description.textureX\r\n        this.textureY = description.textureY\r\n\r\n        this.cell = {\r\n            x: description.cell.x,\r\n            y: description.cell.y\r\n        }\r\n\r\n        this.position = {\r\n            x: description.cell.x * 16,\r\n            y: description.cell.y * 16\r\n        }\r\n    }\r\n\r\n    occupy(playState: any) {\r\n        // if (this.transparent) return\r\n        playState.map.collision[this.cell.y][this.cell.x] = 0\r\n    }\r\n}","import {game} from '@index'\r\n\r\nimport Entity from \"../Entity\";\r\n\r\nimport _pointerOver from \"./supplements/_pointerOver\";\r\nimport _pointerOut from \"./supplements/_pointerOut\";\r\nimport _interpolate from \"./supplements/_interpolate\";\r\nimport _navigate from './supplements/_navigate';\r\nimport _interact from './supplements/_interact';\r\nimport _addScript from \"./supplements/_addScript\";\r\nimport _removeScript from './supplements/_removeScript';\r\nimport _run from './supplements/_run';\r\nimport _walk from './supplements/_walk';\r\nimport getSpriteTextures from './supplements/getSpriteTextures';\r\n\r\nexport default class Actor extends Entity {\r\n    //graphics        position\r\n    textures: any;    target: any\r\n    sprite: any;      \r\n    portret: any;  \r\n    outline: any   \r\n\r\n    //animation-----------------------          \r\n    moving: boolean;  animation: number\r\n    speed: number;    direction: string\r\n\r\n    //state\r\n    isTarget: boolean;\r\n    isChatting: boolean\r\n\r\n    //scripts         \r\n    scripts: any[];   \r\n\r\n    constructor(data: any) {\r\n        super(data)\r\n        console.log(data)\r\n        this.scripts = []\r\n        this.textures = getSpriteTextures(data)\r\n        \r\n        this.sprite = new PIXI.Sprite(this.textures.standSouth)\r\n        this.sprite.instance = this\r\n        this.sprite.interactive = true\r\n        this.sprite.buttonMode = true\r\n\r\n        this.sprite.on('pointerover', () => this.pointerOver())\r\n        this.sprite.on('pointerout', () => this.pointerOut())\r\n\r\n        this.portret = new PIXI.Sprite(new PIXI.Texture(PIXI.utils.BaseTextureCache['male'], new PIXI.Rectangle(0, 0, 128, 128)))\r\n\r\n        this.target = {\r\n        x: this.position.x,\r\n        y: this.position.y\r\n        }\r\n        \r\n        this.moving = false\r\n        this.speed = 1\r\n\r\n        this.animation = 0\r\n        this.direction = 'South'\r\n\r\n        this.isTarget = false\r\n        this.isChatting = false\r\n\r\n    }\r\n\r\n    \r\n\r\n    pointerOver() {\r\n        return _pointerOver(this)\r\n    }\r\n\r\n    pointerOut() {\r\n        return _pointerOut(this)\r\n    }\r\n\r\n    interpolate() {\r\n        return _interpolate(this, game.stack.playState)\r\n    }\r\n\r\n    navigate(end: any, action: any) {\r\n        return _navigate(this, game.stack.playState, end, action)\r\n    }\r\n\r\n    interact(name: string) {\r\n        return _interact(this, game.stack.playState, name)\r\n    }\r\n\r\n    addScript(script: any) {\r\n        return _addScript(this, script)\r\n    }\r\n\r\n    removeScript(name: string) {\r\n        return _removeScript(this, name)\r\n    }\r\n\r\n    run() {\r\n        return _run(this)\r\n    }\r\n\r\n    walk() {\r\n        return _walk(this)\r\n    }\r\n\r\n}","import { game } from \"@index\"\r\n\r\nimport Actor from \"../Actor\"\r\n\r\nimport { _up, _down, _left, _right } from \"./supplements/moves\"\r\n\r\nexport default class Hero extends Actor {\r\n    location: string\r\n\r\n    constructor(player: any) {\r\n        super(player)\r\n\r\n        this.outline = new PIXI.OutlineFilter(2, 0xffff00)\r\n\r\n        this.location = player.location\r\n\r\n        this.moving = false\r\n        this.speed = 1\r\n    }\r\n\r\n    up() {\r\n        return _up(this, game)\r\n    }\r\n\r\n    down() {\r\n        return _down(this, game)\r\n    }\r\n\r\n    left() {\r\n        return _left(this, game)\r\n    }\r\n\r\n    right() {\r\n        return _right(this, game)\r\n    }\r\n}","export function _up(hero: any, game: any) {\r\n    if(hero.moving || hero.isChatting || game.stack.playState.scene || !game.services.emit.socket.connected) return\r\n    hero.sprite.texture = hero.textures.standNorth\r\n    hero.direction = 'North'\r\n    if(typeof game.stack.playState.map.collision[hero.cell.y - 1] !== 'undefined' \r\n        && game.stack.playState.map.collision[hero.cell.y - 1][hero.cell.x]) {\r\n        \r\n        hero.moving = true\r\n        hero.target.y -= 16\r\n        game.stack.playState.map.collision[hero.cell.y][hero.cell.x] = 1\r\n        hero.cell.y -= 1\r\n        game.stack.playState.map.collision[hero.cell.y][hero.cell.x] = 0\r\n\r\n        game.services.emit.socket.API.send(JSON.stringify({\r\n            type: 'move',\r\n            newPosition: hero.cell\r\n        }))\r\n\r\n        hero.addScript({'interpolation': () => hero.interpolate()}) \r\n    }\r\n}\r\n\r\nexport function _down(hero: any, game: any) {\r\n    if(hero.moving || hero.isChatting || game.stack.playState.scene || !game.services.emit.socket.connected) return\r\n    hero.sprite.texture = hero.textures.standSouth\r\n    hero.direction = 'South'\r\n    if(typeof game.stack.playState.map.collision[hero.cell.y + 1] !== 'undefined' \r\n        && game.stack.playState.map.collision[hero.cell.y + 1][hero.cell.x]) {\r\n\r\n        hero.moving = true\r\n        hero.target.y += 16\r\n        game.stack.playState.map.collision[hero.cell.y][hero.cell.x] = 1\r\n        hero.cell.y += 1\r\n        game.stack.playState.map.collision[hero.cell.y][hero.cell.x] = 0\r\n\r\n        game.services.emit.socket.API.send(JSON.stringify({\r\n            type: 'move',\r\n            newPosition: hero.cell\r\n        }))\r\n\r\n        hero.addScript({'interpolation': () => hero.interpolate()})\r\n    }\r\n}\r\n\r\nexport function _left(hero: any, game: any) {\r\n    if(hero.moving || hero.isChatting || game.stack.playState.scene || !game.services.emit.socket.connected) return   \r\n    hero.sprite.texture = hero.textures.standWest\r\n    hero.direction = 'West'\r\n    if(game.stack.playState.map.collision[hero.cell.y][hero.cell.x - 1]) {\r\n\r\n        hero.moving = true\r\n        hero.target.x -= 16\r\n        game.stack.playState.map.collision[hero.cell.y][hero.cell.x] = 1\r\n        hero.cell.x -= 1\r\n        game.stack.playState.map.collision[hero.cell.y][hero.cell.x] = 0\r\n\r\n        game.services.emit.socket.API.send(JSON.stringify({\r\n            type: 'move',\r\n            newPosition: hero.cell\r\n        }))\r\n\r\n        hero.addScript({'interpolation': () => hero.interpolate()})\r\n    }\r\n}\r\n\r\nexport function _right(hero: any, game: any) {\r\n    if(hero.moving || hero.isChatting || game.stack.playState.scene || !game.services.emit.socket.connected) return\r\n    hero.sprite.texture = hero.textures.standEast\r\n    hero.direction = 'East'\r\n    if(game.stack.playState.map.collision[hero.cell.y][hero.cell.x + 1]) {\r\n        hero.moving = true\r\n        hero.target.x += 16\r\n        game.stack.playState.map.collision[hero.cell.y][hero.cell.x] = 1\r\n        hero.cell.x += 1  \r\n        game.stack.playState.map.collision[hero.cell.y][hero.cell.x] = 0\r\n        \r\n        game.services.emit.socket.API.send(JSON.stringify({\r\n            type: 'move',\r\n            newPosition: hero.cell\r\n        }))\r\n\r\n      hero.addScript({'interpolation': () => hero.interpolate()})\r\n    }\r\n}","import Actor from \"../../Actor\";\r\n\r\n\r\nexport default class Enemy extends Actor {\r\n  constructor(data:any) {\r\n    super(data)\r\n\r\n    this.outline = new PIXI.OutlineFilter(2, 0xff0000);\r\n\r\n    \r\n\r\n  }\r\n\r\n  \r\n}","import Actor from \"../../Actor\";\r\n\r\nexport default class Friend extends Actor {\r\n  \r\n  \r\n    lines: object[]\r\n  \r\n    constructor(data:any) {\r\n      super(data)\r\n  \r\n      this.outline = new PIXI.OutlineFilter(2, 0x99ff99);\r\n    \r\n      this.lines = []\r\n  \r\n      // this.lines = [\r\n      //   {m: 'Hi son!'},\r\n      //   {question: \"You're already grown. Are you sure you gonna went to China?\", answers: [\r\n      //     {m: \"Father. I do. That is my passion\", next: 'yes'},\r\n      //     {m: \"There is no way i declain my dream\", next: 'yes'}\r\n      //   ]},\r\n      //   {label: 'yes', m: \"I proud of you. Get this, son.\"},\r\n      //   {m: \"Me, with you'r mom loves you\"}\r\n      // ]\r\n  \r\n      this.sprite.on('rightclick', () => this.click())\r\n      \r\n    }\r\n  \r\n    click() {\r\n      \r\n      console.log('clicked')\r\n    }\r\n  \r\n  }","\r\n\r\nimport Actor from \"../Actor\"\r\n\r\nexport default class Player extends Actor {\r\n\r\n    constructor(player: any) {\r\n        super(player)\r\n\r\n        this.outline = new PIXI.OutlineFilter(2, 0xffffff)\r\n\r\n        this.moving = false\r\n        this.speed = 1\r\n    }\r\n\r\n    move(newCell: any) {\r\n        if(newCell.y - this.cell.y === 1) this.direction = 'South'\r\n        if(newCell.y - this.cell.y ===-1) this.direction = 'North'\r\n        if(newCell.x - this.cell.x === 1) this.direction = 'East'\r\n        if(newCell.x - this.cell.x ===-1) this.direction = 'West'\r\n\r\n        this.moving = true\r\n            this.target = {x: newCell.x * 16, y: newCell.y * 16}\r\n\r\n            this.cell = newCell\r\n      \r\n            this.addScript({interpolation: () => this.interpolate()})\r\n\r\n    }\r\n\r\n    occupy(playState: any) {}\r\n\r\n}","export default function(actor: any, script: any) {\r\n    actor.scripts.push(script)\r\n}","export default function(actor: any, playState: any, name: string) {\r\n    playState.playState.interaction(actor, name)\r\n}","export default function(actor: any, playState: any) {\r\n    let animationStep = 8\r\n    \r\n    let distX = actor.target.x - actor.position.x\r\n    let distY = actor.target.y - actor.position.y\r\n    let dx = Math.sign(distX) * actor.speed\r\n    let dy = Math.sign(distY) * actor.speed\r\n\r\n    if (Math.abs(distX) <= actor.speed && Math.abs(distY) <= actor.speed) {\r\n\r\n        actor.sprite.texture = actor.textures[`stand${actor.direction}`]\r\n\r\n        actor.position.x = actor.target.x\r\n        actor.position.y = actor.target.y\r\n        actor.moving = false\r\n\r\n        if(actor.isTarget) {\r\n            playState.pivot()\r\n            playState.checkPosition()\r\n        }\r\n\r\n        else {\r\n            actor.sprite.position.set(\r\n                (window.innerWidth  / 2) + actor.position.x,\r\n                (window.innerHeight / 2) + actor.position.y\r\n            )\r\n        }\r\n\r\n        actor.removeScript('interpolation')\r\n\r\n    } else {\r\n      \r\n        if((Math.abs(distX || distY) % animationStep) === 0) {\r\n            actor.animation += 1\r\n            actor.sprite.texture = actor.textures[`walk${actor.direction}`][actor.animation]\r\n        }\r\n        if(actor.animation > 3) {\r\n            actor.animation = 0\r\n            actor.sprite.texture = actor.textures[`walk${actor.direction}`][actor.animation]\r\n        }\r\n\r\n        actor.position.x += dx\r\n        actor.position.y += dy\r\n\r\n        if(!actor.isTarget) {\r\n            actor.sprite.position.set(\r\n                (window.innerWidth  / 2) + actor.position.x,\r\n                (window.innerHeight / 2) + actor.position.y\r\n            )\r\n        }\r\n      \r\n    }\r\n}","export default function(actor: any, playState: any, end: any, action: any) {\r\n    let {collision} = playState.map\r\n    \r\n    if(!collision[end.y][end.x]) return setTimeout(() => {\r\n        actor.navigate(end, action)\r\n    }, 1000) \r\n\r\n    let path = pathFinding(playState, actor.cell, end)\r\n\r\n    actor.addScript({navigation: () => {\r\n        if(actor.moving || actor.isChatting) return\r\n                \r\n        path!.shift()\r\n\r\n        if(!path!.length) {\r\n            actor.removeScript('navigation');\r\n            return action ? action() : null\r\n        }\r\n\r\n        let step = path![0]\r\n        if(step.x === end.x && step.y === end.y && collision[step.y][step.x] === 0) {\r\n            return setTimeout(() => {\r\n                actor.removeScript('navigation')\r\n                actor.navigate(end, action)\r\n            }, 1000)\r\n        }\r\n        \r\n        if(step.y - actor.cell.y === 1) actor.direction = 'South'\r\n        if(step.y - actor.cell.y ===-1) actor.direction = 'North'\r\n        if(step.x - actor.cell.x === 1) actor.direction = 'East'\r\n        if(step.x - actor.cell.x ===-1) actor.direction = 'West'\r\n\r\n        if(collision[step.y][step.x] === 0) {\r\n            \r\n            path = pathFinding(playState, actor.cell, end)\r\n        } else {\r\n            actor.moving = true\r\n            actor.target = {x: step.x * 16, y: step.y * 16}\r\n    \r\n            collision[actor.cell.y][actor.cell.x] = 1\r\n            actor.cell = step\r\n            collision[actor.cell.y][actor.cell.x] = 0\r\n    \r\n    \r\n            actor.addScript({interpolation: () => actor.interpolate()})\r\n        }\r\n\r\n    }})\r\n}\r\n\r\n\r\n\r\nfunction pathFinding(playState: any, start: any, end: any) {\r\n    let terrain = playState.map.collision\r\n  \r\n    class Node {\r\n      parent: any\r\n      x: number\r\n      y: number\r\n  \r\n      g: number; h: number; f: number\r\n      constructor(coordinate: any, parent: any = null) {\r\n        this.parent = parent\r\n  \r\n        this.x = coordinate.x\r\n        this.y = coordinate.y\r\n  \r\n        this.g = 0\r\n        this.h = 0\r\n        this.f = 0\r\n      }\r\n    }\r\n  \r\n    let openSet = [new Node(start)]\r\n    let closedSet = []\r\n  \r\n    while(openSet.length) {\r\n      let current = openSet[0]\r\n  \r\n      for(let i = 0; i < openSet.length; i++) {\r\n        if(openSet[i].f < current.f) {\r\n          current = openSet[i]\r\n        }\r\n      }\r\n  \r\n      openSet = openSet.filter(nodes => nodes !== current)\r\n      closedSet.push(current)\r\n  \r\n      if(current.x === end.x\r\n      && current.y === end.y) {\r\n        let path = []\r\n        while (current) {\r\n          path.push({x: current.x, y: current.y})\r\n          current = current.parent\r\n        }\r\n        return path.reverse()\r\n      }\r\n  \r\n      let neighbors = []\r\n  \r\n      for(let direction of [{x: 0, y: -1}, {x: 0, y: 1}, {x: -1, y: 0}, {x: 1, y: 0}]) {\r\n  \r\n        let nodePosition = {x: current.x + direction.x, y: current.y + direction.y}\r\n  \r\n        if((terrain[nodePosition.y] !== undefined && terrain[nodePosition.y][nodePosition.x] !== undefined)\r\n        && (terrain[nodePosition.y][nodePosition.x] && !closedSet.includes(new Node(nodePosition, current)))) {\r\n  \r\n          let neighbor = new Node(nodePosition, current)\r\n          neighbors.push(neighbor)\r\n  \r\n        }\r\n      }\r\n  \r\n      for(let neighbor of neighbors) {\r\n  \r\n        if(!closedSet.includes(neighbor)) {\r\n          neighbor.g = current.g + 1\r\n          neighbor.h = ((neighbor.x - end.x)**2) + ((neighbor.y - end.y)** 2)\r\n          neighbor.f = neighbor.g + neighbor.h\r\n  \r\n        }\r\n        \r\n        for(let node of openSet) {\r\n          if(neighbor === node && neighbor.g > node.g) {\r\n            break\r\n          }\r\n        }\r\n  \r\n        openSet.push(neighbor)\r\n      }\r\n  \r\n      \r\n    }\r\n    \r\n  }","export default function(actor: any) {\r\n    actor.sprite.filters = []\r\n}","export default function(actor: any) {\r\n    actor.sprite.filters = [actor.outline]\r\n    console.log(actor.name)\r\n}","export default function(actor: any, name: any) {\r\n    actor.scripts = actor.scripts.filter((script: any) => Object.keys(script)[0] !== name)\r\n}","export default function(actor: any) {\r\n    if(actor.position.x % 2 !== 0) actor.position.x += 1\r\n    if(actor.position.y % 2 !== 0) actor.position.y += 1\r\n\r\n    actor.speed = 2\r\n}","export default function(actor: any) {actor.speed = 1}","export default function(data: any) {\r\n    \r\n    let texture = PIXI.utils.BaseTextureCache[data.texture]\r\n    let w = 26\r\n    let h = 36\r\n    let startX = data.textureX * w\r\n    let startY = data.textureY * h\r\n\r\n    return {\r\n        standSouth: \r\n        new PIXI.Texture(texture, new PIXI.Rectangle(startX + (w * 1), startY + (h * 0), w, h)),\r\n        standWest:  \r\n        new PIXI.Texture(texture, new PIXI.Rectangle(startX + (w * 1), startY + (h * 1), w, h)),\r\n        standEast:  \r\n        new PIXI.Texture(texture, new PIXI.Rectangle(startX + (w * 1), startY + (h * 2), w, h)),\r\n        standNorth: \r\n        new PIXI.Texture(texture, new PIXI.Rectangle(startX + (w * 1), startY + (h * 3), w, h)),\r\n\r\n        walkSouth: [\r\n            new PIXI.Texture(texture, new PIXI.Rectangle(startX + (w * 0), startY + (h * 0), w, h)),\r\n            new PIXI.Texture(texture, new PIXI.Rectangle(startX + (w * 1), startY + (h * 0), w, h)),\r\n            new PIXI.Texture(texture, new PIXI.Rectangle(startX + (w * 2), startY + (h * 0), w, h)),\r\n            new PIXI.Texture(texture, new PIXI.Rectangle(startX + (w * 1), startY + (h * 0), w, h)),\r\n        ],\r\n        walkWest: [\r\n            new PIXI.Texture(texture, new PIXI.Rectangle(startX + (w * 0), startY + (h * 1), w, h)),\r\n            new PIXI.Texture(texture, new PIXI.Rectangle(startX + (w * 1), startY + (h * 1), w, h)),\r\n            new PIXI.Texture(texture, new PIXI.Rectangle(startX + (w * 2), startY + (h * 1), w, h)),\r\n            new PIXI.Texture(texture, new PIXI.Rectangle(startX + (w * 1), startY + (h * 1), w, h)),\r\n        ],\r\n        walkEast: [\r\n            new PIXI.Texture(texture, new PIXI.Rectangle(startX + (w * 0), startY + (h * 2), w, h)),\r\n            new PIXI.Texture(texture, new PIXI.Rectangle(startX + (w * 1), startY + (h * 2), w, h)),\r\n            new PIXI.Texture(texture, new PIXI.Rectangle(startX + (w * 2), startY + (h * 2), w, h)),\r\n            new PIXI.Texture(texture, new PIXI.Rectangle(startX + (w * 1), startY + (h * 2), w, h)),\r\n        ],\r\n        walkNorth: [\r\n            new PIXI.Texture(texture, new PIXI.Rectangle(startX + (w * 0), startY + (h * 3), w, h)),\r\n            new PIXI.Texture(texture, new PIXI.Rectangle(startX + (w * 1), startY + (h * 3), w, h)),\r\n            new PIXI.Texture(texture, new PIXI.Rectangle(startX + (w * 2), startY + (h * 3), w, h)),\r\n            new PIXI.Texture(texture, new PIXI.Rectangle(startX + (w * 1), startY + (h * 3), w, h)),\r\n        ]\r\n    }\r\n}","import { game } from '@index'\r\n\r\nexport default class Renderer {\r\n    screen: any\r\n\r\n    constructor($canvas: HTMLCanvasElement) {\r\n        \r\n        this.screen = PIXI.autoDetectRenderer({\r\n            view: $canvas,\r\n            width: window.innerWidth,\r\n            height: window.innerHeight,\r\n            resolution: window.devicePixelRatio\r\n            \r\n        })\r\n\r\n    }\r\n    \r\n    resize() {\r\n        let WIDTH = window.innerWidth % 2 ? window.innerWidth - 1 : window.innerWidth\r\n        let HEIGHT = window.innerHeight % 2 ? window.innerHeight - 1 : window.innerHeight\r\n        this.screen.resize(WIDTH, HEIGHT)\r\n\r\n        game.stack.startState.resize()\r\n\r\n        if(game.services.status.builded) {\r\n            game.stack.playState.resize()\r\n            game.stack.GUI.HUD.resize()\r\n\r\n        }\r\n\r\n    }\r\n}","import FilterState from './states/FilterState/FilterState'\r\nimport StartState from './states/StartState/StartState'\r\nimport ChatState from './states/ChatState/ChatState'\r\nimport BattleState from './states/BattleState/BattleState'\r\nimport PlayState from './states/PlayState/PlayState'\r\nimport GUI from './states/GUI/GUI'\r\n\r\n\r\nexport default class StateStack {\r\n    stage: PIXI.display.Stage\r\n\r\n    playState: PlayState\r\n    GUI: GUI\r\n    \r\n    chatState: ChatState\r\n    battleState: BattleState\r\n    \r\n    startState: StartState\r\n\r\n    filterState: FilterState\r\n\r\n    constructor(renderer: any) {\r\n        // Main stage that includes every scene\r\n        this.stage = new PIXI.display.Stage()\r\n        this.stage.sortableChildren = true\r\n        this.stage.filterArea = renderer.screen.screen\r\n\r\n        this.playState      = new PlayState()\r\n        this.GUI            = new GUI()\r\n        \r\n        this.chatState      = new ChatState()\r\n        this.battleState    = new BattleState()\r\n        \r\n        this.startState     = new StartState(this, renderer)\r\n        \r\n        this.filterState    = new FilterState()\r\n\r\n        this.stage.addChild(this.playState.stage)\r\n        this.stage.addChild(this.GUI.stage)\r\n\r\n        this.stage.addChild(this.battleState.stage)\r\n        this.stage.addChild(this.chatState.stage)\r\n\r\n        this.stage.addChild(this.startState.stage)\r\n\r\n        this.stage.addChild(this.filterState.stage)\r\n\r\n    }\r\n\r\n    \r\n}","import State from \"../State\";\r\n\r\nexport default class BattleState extends State {\r\n\r\n    constructor() {\r\n        super()\r\n\r\n    }\r\n\r\n}","import State from \"../State\";\r\n\r\nexport default class ChatState extends State {\r\n\r\n    constructor() {\r\n        super()\r\n\r\n    }\r\n\r\n}","import State from \"../State\";\r\n\r\nexport default class EffectState extends State {\r\n\r\n    constructor() {\r\n        super()\r\n\r\n    }\r\n\r\n}","import State from \"../State\";\r\nimport HUD from \"./HUD/HUD\";\r\n\r\nexport default class GUI extends State {\r\n\r\n    HUD: HUD\r\n\r\n    constructor() {\r\n        super()\r\n\r\n        this.HUD = new HUD()\r\n\r\n\r\n\r\n        this.stage.addChild(this.HUD.stage)\r\n\r\n    }\r\n\r\n}","import { game } from \"@index\"\r\n\r\nimport State from \"../../State\"\r\n\r\nimport Character from \"./bars/Character/Character\"\r\nimport Chat from \"./bars/Chat/Chat\"\r\nimport Menu from \"./bars/Menu/Menu\"\r\nimport MiniMap from \"./bars/MiniMap/MiniMap\"\r\n\r\nexport default class HUD extends State {\r\n    character: Character\r\n    chat: Chat\r\n    menu: Menu\r\n    miniMap: MiniMap\r\n\r\n    HUDswitcherBtn: any\r\n\r\n    inventoryBtn: any\r\n    questsBtn: any\r\n    achivementsBtn: any\r\n    menuBtn: any\r\n\r\n    constructor() {\r\n        super()\r\n\r\n        this.stage.x = 0\r\n        this.stage.y = 0\r\n\r\n        this.stage.visible = true\r\n        \r\n        this.character   = new Character(300, 100)\r\n        this.chat        = new Chat(500, 200)\r\n        this.menu        = new Menu(500, 50)\r\n        this.miniMap     = new MiniMap(200, 200)\r\n\r\n        this.HUDswitcherBtn = new PIXI.Graphics()\r\n        this.HUDswitcherBtn.beginFill(0xFF0000)\r\n        this.HUDswitcherBtn.drawRect(0, 0, 36, 36)\r\n        this.HUDswitcherBtn.endFill()\r\n        this.HUDswitcherBtn.interactive = true\r\n        this.HUDswitcherBtn.buttonMode = true\r\n\r\n        this.HUDswitcherBtn.on('click', () => {\r\n            this.character.stage.visible = !this.character.stage.visible\r\n            this.chat.stage.visible = !this.chat.stage.visible\r\n            this.menu.stage.visible = !this.menu.stage.visible\r\n        })\r\n\r\n        this.stage.addChild(this.character.stage)\r\n        this.stage.addChild(this.chat.stage)\r\n        this.stage.addChild(this.menu.stage)\r\n        this.stage.addChild(this.miniMap.stage)\r\n        this.stage.addChild(this.HUDswitcherBtn)\r\n\r\n    }\r\n\r\n    resize() {\r\n        this.chat.stage.x = 0\r\n        this.chat.stage.y = game.renderer.screen.height - this.chat.height\r\n\r\n        this.menu.stage.x = game.renderer.screen.width - this.menu.width\r\n        this.menu.stage.y = game.renderer.screen.height - this.menu.height\r\n\r\n        this.miniMap.stage.x = game.renderer.screen.width - this.miniMap.width\r\n        this.miniMap.stage.y = 0\r\n\r\n        this.HUDswitcherBtn.x = game.renderer.screen.width - this.miniMap.width - 38\r\n        this.HUDswitcherBtn.y = 2\r\n\r\n      }\r\n\r\n    build() {\r\n        // stack.playState.stage.addChild(this.characterBar.stage)\r\n        \r\n        // stack.stage.addChild(this.stage)\r\n        // this.show()\r\n\r\n        \r\n        // stack.playState.stage.addChild(this.chatBar.stage)\r\n        // stack.playState.stage.addChild(this.menuBar.stage)\r\n\r\n        // stack.playState.stage.addChild(this.HUDswitcherBtn)\r\n\r\n        // this.show()\r\n        // console.log('HUD')\r\n\r\n    }\r\n\r\n}\r\n\r\n// HUD.build = function() {\r\n//     console.log('123')\r\n// }","import HUDelement from \"../HUDelement\";\r\n\r\nexport default class Character extends HUDelement {\r\n    \r\n    constructor(width: number, height: number) {\r\n        super(width, height)\r\n\r\n        this.stage.x = 0\r\n        this.stage.y = 0\r\n\r\n    }\r\n}","import HUDelement from \"../HUDelement\";\r\n\r\nimport commands from './commands'\r\n\r\nexport default class Chat extends HUDelement {\r\n    input: PIXI.TextInput\r\n\r\n    constructor(width: number, height: number) {\r\n        super(width, height)\r\n\r\n        this.input = new PIXI.TextInput({\r\n            input: {\r\n                fontSize: '18px',\r\n                padding: '12px',\r\n                width: '480px',\r\n                color: '#26272E'\r\n            },\r\n            box: {\r\n                default:  {fill: 0xE8E9F3, rounded: 0, stroke: {color: 0xCBCEE0, width: 0}},\r\n                focused:  {fill: 0xE1E3EE, rounded: 0, stroke: {color: 0xABAFC6, width: 0}},\r\n                disabled: {fill: 0xDBDBDB, rounded: 0}\r\n            }\r\n        })\r\n\r\n        this.input.placeholder = 'Enter your Text...'\r\n        this.input.x = 10\r\n        this.input.y = 145\r\n\r\n        this.stage.addChild(this.input)\r\n\r\n        this.input.on('focus', () => {\r\n            game.controller.chatFocused = true\r\n        })\r\n\r\n        this.input.on('blur', () => {\r\n            game.controller.chatFocused = false\r\n        })\r\n        \r\n    }\r\n\r\n    send() {\r\n        \r\n        if(this.input.text[0] === '/') commands(this.input.text)\r\n        else {\r\n            console.log(this.input.text)\r\n        }\r\n        \r\n        this.input.text = ''\r\n    }\r\n}","\r\n\r\nexport default (input: string) => {\r\n\r\n    eval(input.slice(1))\r\n\r\n    // switch (input) {\r\n    //     case '/player': {\r\n    //         console.log(stack.playState.player)\r\n    //     }\r\n\r\n        \r\n    //     case '/player:speed=1': {\r\n    //         stack.playState.player.speed = 1\r\n    //     }\r\n\r\n    //     case '/player:speed=3': {\r\n    //         stack.playState.player.speed = 3\r\n    //     }\r\n\r\n    //     case '/player:speed=4': {\r\n    //         stack.playState.player.speed = 4\r\n    //     }\r\n    // }\r\n}","export default class HUDelement {\r\n    stage: PIXI.Container\r\n\r\n    graphics: PIXI.Graphics\r\n\r\n    width: number\r\n    height: number\r\n\r\n    constructor(width: number, height:number) {\r\n        this.width = width\r\n        this.height = height\r\n\r\n        this.stage = new PIXI.Container()\r\n\r\n        this.stage.width = this.width\r\n        this.stage.height = this.height\r\n\r\n        this.graphics = new PIXI.Graphics()\r\n        this.graphics.beginFill(0xFFFF00)\r\n        this.graphics.drawRect(0, 0, this.width, this.height)\r\n        this.graphics.endFill()\r\n\r\n        this.stage.addChild(this.graphics)\r\n    }\r\n}","import HUDelement from \"../HUDelement\";\r\n\r\nexport default class Menu extends HUDelement {\r\n    inventoryBtn: PIXI.Sprite\r\n    questsBtn: PIXI.Sprite\r\n    achivementsBtn: PIXI.Sprite\r\n    menuBtn: PIXI.Sprite\r\n\r\n    constructor(width: number, height: number) {\r\n        super(width, height)\r\n\r\n        this.inventoryBtn = new PIXI.Sprite()\r\n        this.questsBtn = new PIXI.Sprite()\r\n        this.achivementsBtn = new PIXI.Sprite()\r\n        this.menuBtn = new PIXI.Sprite()\r\n    }\r\n}","import HUDelement from \"../HUDelement\";\r\n\r\nexport default class MiniMap extends HUDelement {\r\n\r\n    constructor(width: number, height: number) {\r\n        super(width, height)\r\n        \r\n        \r\n\r\n    }\r\n}","import State from \"../State\";\r\nimport { game } from \"@index\";\r\n\r\nimport _pivot from \"./supplements/_pivot\"\r\nimport _resize from \"./supplements/_resize\";\r\nimport _changeCamera from \"./supplements/_changeCamera\";\r\nimport _zoomCamera from \"./supplements/_zoomCamera\";\r\nimport _checkPosition from \"./supplements/_checkPosition\";\r\nimport _changeMap from \"./supplements/_changeMap\";\r\nimport _interaction from \"./supplements/_interaction\";\r\nimport _playScripts from \"./supplements/_playScripts\";\r\nimport _addScript from \"./supplements/_addScript\";\r\nimport _removeScript from \"./supplements/_removeScript\";\r\n\r\nexport default class PlayState extends State {\r\n    stage: PIXI.Container\r\n    actorsGroup: any\r\n\r\n    zoomX: number\r\n    zoomY: number\r\n    \r\n    player: any\r\n    target: any\r\n\r\n    map: any\r\n\r\n    scripts: any\r\n    scene: boolean\r\n\r\n    constructor() {\r\n        super()\r\n\r\n        this.stage = new PIXI.Container()\r\n        this.actorsGroup = new PIXI.display.Group(0, true)\r\n        this.actorsGroup.on('sort', (sprite: any) => {\r\n            sprite.zOrder = sprite.instance.position.y\r\n        });\r\n\r\n        this.zoomX = 480 // 240\r\n        this.zoomY = 270 // 135\r\n        \r\n        this.player = null\r\n        this.target = null\r\n\r\n        this.map = null\r\n\r\n        this.scripts = []\r\n        this.scene = false\r\n\r\n    }\r\n\r\n    pivot() {\r\n        return _pivot(this)\r\n    }\r\n\r\n    resize() {\r\n        return _resize(this, game.renderer.screen)\r\n    }\r\n\r\n    changeCamera(actor: any, zoom?: number) {\r\n        return _changeCamera(this, actor, zoom)\r\n        \r\n    }\r\n\r\n    zoomCamera(zoom: number) {\r\n        return _zoomCamera(this, zoom)\r\n    }\r\n\r\n    checkPosition() {\r\n        return _checkPosition(this, game.services)\r\n    }\r\n\r\n    changeMap(location: any) {\r\n        return _changeMap(this, game, location)\r\n    }\r\n\r\n    interaction(actor: any, target: any) {\r\n        return _interaction(this, game, actor, target)\r\n    }\r\n\r\n    playScripts() {\r\n        return _playScripts(this)\r\n    }\r\n\r\n    addScript(script: any) {\r\n        return _addScript(this, script)\r\n    }\r\n\r\n    removeScript(script: any) {\r\n        return _removeScript(this, script)\r\n    }\r\n\r\n\r\n\r\n}","export default function(playState: any, script: any) {\r\n    playState.scripts.push(script)\r\n}","export default function(playState: any, actor: any, zoom: any) {\r\n    playState.target.isTarget = false\r\n    playState.target = actor\r\n    playState.target.isTarget = true\r\n\r\n    if(zoom) playState.addScript(() => playState.zoomCamera(zoom))\r\n\r\n    playState.pivot()\r\n    playState.resize()\r\n    \r\n    playState.target.sprite.pivot.set(null)\r\n}","export default function(playState: any, game: any, location: any) {\r\n    if(!playState.player.isTarget) return\r\n    // game.stack.fadeInState.show()\r\n    // game.stack.fadeInState.addScript(() => game.stack.fadeInState.fadeOut())\r\n\r\n    console.log(location)\r\n    \r\n\r\n    let { x, y } = playState.map.adjacent[location].to\r\n\r\n    playState.player.location = location\r\n    playState.map.collision[playState.player.cell.y][playState.player.cell.x] = 1\r\n    playState.player.cell = { x, y }\r\n    playState.map.collision[playState.player.cell.y][playState.player.cell.x] = 0\r\n    \r\n    playState.player.position = {\r\n        x: playState.player.cell.x * 16,\r\n        y: playState.player.cell.y * 16\r\n    }\r\n\r\n    playState.player.target = {\r\n        x: playState.player.position.x,\r\n        y: playState.player.position.y\r\n    }\r\n\r\n    playState.map.actors = playState.map.actors.filter((actor: any) => actor.constructor.name !== 'Hero')\r\n\r\n    playState.map = game.services.storage.locations[location]\r\n\r\n    playState.map.actors.push(playState.player)\r\n    \r\n    playState.stage.removeChildren()\r\n\r\n    playState.stage.addChild(game.services.storage.locations[location].layers.after)\r\n    playState.map.actors.forEach((actor: any) => playState.stage.addChild(actor.sprite))\r\n    playState.stage.addChild(game.services.storage.locations[location].layers.before)\r\n\r\n\r\n    playState.resize()\r\n    playState.pivot()\r\n\r\n    if(playState.map.lesson && 'first') {\r\n        // this.popupModal('lesson')\r\n    }\r\n}","export default async function(playState: any, services: any) {\r\n    // culling\r\n\r\n    // is it new map?\r\n    for(let map in playState.map.adjacent) {\r\n\r\n        if(playState.player.cell.x === playState.map.adjacent[map].entry.x && \r\n            playState.player.cell.y === playState.map.adjacent[map].entry.y) {\r\n  \r\n            playState.changeMap(map)\r\n            \r\n            services.emit.socket.changeTo(services.storage.locations[map].port)\r\n            \r\n            let newMaps = []\r\n            for(let map in playState.map.adjacent) {\r\n                if(!(map in services.storage._maps)) {\r\n                    newMaps.push(map)\r\n                }\r\n            }\r\n            \r\n            if(newMaps.length) {\r\n                await services.setup.loadMaps(newMaps)\r\n                await services.setup.createLocations()\r\n            }\r\n            \r\n                \r\n            break\r\n        }\r\n  \r\n    }\r\n}","export default function(playState: any, game: any, actor: any, target: any) {\r\n    if(target) {\r\n        game.stack.chatState.dialogue(actor, target)\r\n    } else {\r\n        let {x,y} = actor.cell\r\n        let direction: any\r\n        let xOffset = actor.direction === 'East'  ? 1 : actor.direction === 'West'  ? -1 : 0\r\n        let yOffset = actor.direction === 'South' ? 1 : actor.direction === 'North' ? -1 : 0\r\n  \r\n        xOffset === 1 ? direction = 'West'  : null; xOffset === -1 ? direction = 'East' : null;\r\n        yOffset === 1 ? direction = 'North' : null; yOffset === -1 ? direction = 'South': null;\r\n  \r\n        playState.map.actors.forEach((target: any) => {\r\n          if(target.cell.x === x + xOffset && target.cell.y === y + yOffset) {\r\n            target.sprite.texture = target.textures[`stand${direction}`]\r\n            game.stack.chatState.dialogue(actor, target)\r\n          }\r\n        })\r\n  \r\n        playState.map.items.forEach((item: any) => {\r\n            if(item.cell.x === x + xOffset && item.cell.y === y + yOffset) {\r\n                item.use()\r\n            }\r\n        })\r\n  \r\n    }\r\n}","export default function(playState: any) {\r\n\r\n    playState.map.layers.after.pivot.set(playState.target.position.x, playState.target.position.y)\r\n    playState.map.layers.before.pivot.set(playState.target.position.x, playState.target.position.y)\r\n\r\n    playState.map.actors.forEach((actor: any) => {\r\n        if(!actor.isTarget) {\r\n            actor.sprite.pivot.set(\r\n                playState.target.position.x,\r\n                playState.target.position.y\r\n            )\r\n        }\r\n    })\r\n\r\n    \r\n}","export default function(playState: any) {\r\n    for(let script of playState.scripts) {\r\n        console.log(playState.scripts)\r\n        script()\r\n    }\r\n}","export default function(playState: any, script: any) {\r\n    playState.scripts.splice(playState.scripts.indexOf(script), 1)\r\n}","export default function(playState: any, renderer: any) {\r\n    \r\n    playState.stage.scale.set(\r\n        Math.round(window.innerWidth / playState.zoomX), \r\n        Math.round(window.innerHeight / playState.zoomY)   \r\n    )\r\n\r\n\r\n    \r\n    let targetOffsetX = (renderer.width  / 2)\r\n    let targetOffsetY = (renderer.height / 2)\r\n\r\n    playState.target.sprite.x = targetOffsetX\r\n    playState.target.sprite.y = targetOffsetY\r\n\r\n    playState.stage.position.set(playState.target.sprite.x, playState.target.sprite.y)\r\n\r\n    playState.stage.pivot.set(\r\n        targetOffsetX + (playState.target.sprite.width  / 2), \r\n        targetOffsetY + (playState.target.sprite.height / 2)\r\n    )\r\n\r\n    playState.map.layers.after.position.set(\r\n        targetOffsetX + ((playState.target.sprite.width - 16) / 2), \r\n        targetOffsetY + ((playState.target.sprite.height - 16) + 2)\r\n    )\r\n\r\n    playState.map.layers.before.position.set(\r\n        targetOffsetX + ((playState.target.sprite.width - 16) / 2), \r\n        targetOffsetY + ((playState.target.sprite.height - 16) + 2)\r\n    )\r\n\r\n    playState.map.actors.forEach((actor: any) => {\r\n        if(!actor.isTarget) {\r\n            actor.sprite.position.set(\r\n                targetOffsetX + actor.position.x, \r\n                targetOffsetY + actor.position.y\r\n            )\r\n        }\r\n    })\r\n}","export default function(playState: any, zoom: any) {\r\n    if(playState.zoom >= zoom) {\r\n        playState.zoom = zoom\r\n        playState.stage.scale.set(zoom, zoom)\r\n        playState.stage.scale\r\n        \r\n        playState.removeScript(playState.zoomCamera)\r\n        console.log(playState.zoom)\r\n        return\r\n    }\r\n    \r\n    playState.zoom += .05\r\n    playState.stage.scale.set(playState.zoom, playState.zoom)\r\n}","import { game } from \"@index\";\r\n\r\nimport State from \"../State\";\r\n\r\nimport droplet from \"./assets/droplet.png\"\r\n\r\nimport Particle from \"./dependencies/Particle\";\r\nimport Wave from \"./dependencies/Wave\";\r\n\r\nexport default class StartState extends State {\r\n\r\n    stackRef: any\r\n    \r\n    elevator: PIXI.Graphics\r\n\r\n    texture: PIXI.Texture\r\n    textureSize: number\r\n\r\n    characters: string[]\r\n\r\n    drops: Particle[]\r\n    waves: Wave[]\r\n\r\n    progress: number\r\n    bottom: number\r\n\r\n    box: PIXI.Sprite\r\n\r\n    constructor(stack: any, renderer: any) {\r\n        super()\r\n\r\n        this.stackRef = stack\r\n\r\n        this.stage = new PIXI.ParticleContainer(1000)\r\n\r\n        this.elevator = new PIXI.Graphics()\r\n        \r\n        \r\n        renderer.screen.generateTexture(this.elevator)\r\n\r\n        \r\n        \r\n\r\n        this.texture = PIXI.Texture.from(droplet)\r\n        this.textureSize = 24\r\n\r\n        this.characters = ['A', 'H', 'E', 'O', 'L', 'F', 'R', 'Y', 'U', 'P', 'K']\r\n\r\n        this.drops = []\r\n        this.waves = []\r\n\r\n\r\n        this.progress = 0\r\n        this.bottom = window.innerHeight - ((this.progress * window.innerHeight) / 100)\r\n\r\n        this.elevator.beginFill(0xFFFF00)\r\n        this.elevator.drawRect(100, 100, 100, 100)\r\n        this.elevator.endFill()\r\n\r\n\r\n\r\n        this.addFilters()\r\n        \r\n        this.generateWave()\r\n\r\n        // this.box = new PIXI.Sprite(renderer.screen.generateTexture(this.elevator))\r\n        \r\n        // this.stage.addChild(this.box)\r\n        \r\n        \r\n\r\n        setInterval(() => {\r\n            // this.progress += 3\r\n            // this.bottom = window.innerHeight - ((this.progress * window.innerHeight) / 100)\r\n            this.generateLetter()\r\n            \r\n        }, 300)\r\n\r\n    }\r\n\r\n    randomizer(min: number, max: number) {\r\n        return min + (max - min)*Math.random()\r\n    }\r\n\r\n    generateLetter() {\r\n        let letter = this.characters[Math.round(Math.random()*this.characters.length)]\r\n\r\n        let leon = new LeonSans({\r\n            text: letter,\r\n            color: ['#000000'],\r\n            size: 200,\r\n            weight: 10,\r\n            isPath: true,\r\n            tracking: 5\r\n        });\r\n\r\n        let posX = this.randomizer(0, window.innerWidth - 150)\r\n        let posY = this.randomizer(-100, 100)\r\n\r\n        leon.paths.forEach((point: any) => {\r\n            let particle = new Particle(\r\n                point.x, point.y, \r\n                this.texture, \r\n                this.textureSize, \r\n                posX, posY,\r\n                this.randomizer\r\n            )\r\n            this.drops.push(particle)\r\n            this.stage.addChild(particle.sprite)\r\n        })\r\n    }\r\n\r\n    generateWave() {\r\n        for(let i = 0; i < (window.screen.availWidth / 300) * 5; i++) {\r\n            let wave = new Wave(this.texture, i, this.randomizer)\r\n            this.waves.push(wave)\r\n            this.stage.addChild(wave.sprite)\r\n        }\r\n    }\r\n\r\n    addFilters() {\r\n        let blurFilter = new PIXI.filters.BlurFilter()\r\n        blurFilter.blur = 15\r\n\r\n        let shader = `varying vec2 vTextureCoord;\r\n\r\n        uniform sampler2D uSampler;\r\n        \r\n        void main(void){\r\n            vec4 color = texture2D(uSampler, vTextureCoord);\r\n            if(color.a>0.3) {\r\n                gl_FragColor = vec4(1.,1.,1.,1.);\r\n            } else {\r\n                gl_FragColor = vec4(0.,0.,0.,1.);\r\n            }\r\n            // gl_FragColor = texture2D(uSampler, vTextureCoord);\r\n           \r\n        }`\r\n        let threasholdFilter = new PIXI.Filter(undefined, shader, {})\r\n\r\n\r\n        this.stackRef.stage.filters = [blurFilter, threasholdFilter]\r\n\r\n    }\r\n\r\n    interpolateProgress() {\r\n        if(this.progress !== game.services.status.setupProgress) {\r\n            this.progress += .5\r\n            this.bottom = window.innerHeight - ((this.progress * window.innerHeight) / 100)\r\n        }\r\n    }\r\n\r\n    resize() {\r\n        this.progress = game.services.status.setupProgress\r\n        this.bottom = window.innerHeight - ((game.services.status.setupProgress * window.innerHeight) / 100)\r\n    }\r\n\r\n\r\n}","export default __webpack_public_path__ + \"d6cb43cd981ca0924686ab7993788f7d.png\";","export default class Particle {\r\n\r\n    sprite: PIXI.Sprite\r\n\r\n    size: number\r\n\r\n    x:   number; y:   number\r\n    vx:  number; vy:  number\r\n    vxb: number\r\n\r\n    gravity: number\r\n    bounce:  number\r\n\r\n    mode: number\r\n\r\n\r\n    constructor(x: number, y: number, texture: any, size: number, posX: number, posY: number, randomizer: Function) {\r\n        this.sprite = new PIXI.Sprite(texture)\r\n\r\n        this.size = size\r\n\r\n        this.x = posX + x\r\n        this.y = posY + y\r\n\r\n        this.sprite.width = this.sprite.height = this.size\r\n\r\n        this.sprite.x = this.x\r\n        this.sprite.y = this.y\r\n\r\n        this.gravity = 0.6\r\n\r\n        this.bounce = randomizer(-.7, -0.3)\r\n\r\n        this.mode = 0\r\n\r\n        this.vx = 0\r\n        this.vy = 0\r\n\r\n        this.vxb = randomizer(-2, 2)\r\n\r\n        \r\n    }\r\n\r\n    update(bottom: number) {\r\n\r\n\r\n        this.vy += this.gravity\r\n\r\n        this.x += this.vx\r\n        this.y += this.vy\r\n\r\n        if(this.mode) {\r\n            this.x += this.vxb\r\n            // this.size = 30\r\n            // this.sprite.width = this.sprite.height = this.size\r\n        }\r\n\r\n        if(this.y + this.size > bottom) {\r\n            this.mode = 1\r\n            this.y = bottom - this.size\r\n            this.vy *= this.bounce\r\n            \r\n\r\n\r\n\r\n        }\r\n\r\n        this.sprite.x = this.x\r\n        this.sprite.y = this.y\r\n    }\r\n\r\n}","\r\nexport default class Wave {\r\n\r\n    sprite: any\r\n\r\n    x: number; y: number\r\n\r\n    speed: number\r\n    moving: number\r\n\r\n    constructor(texture: any, i: number, randomizer: Function) {\r\n        this.sprite = new PIXI.Sprite(texture)\r\n\r\n        this.sprite.width = 300\r\n        this.sprite.height = 300\r\n\r\n        \r\n\r\n        this.x = i*70 - 150\r\n        this.y = 0\r\n\r\n        this.speed = 0.05\r\n\r\n        this.moving = randomizer(0, 50)\r\n\r\n \r\n\r\n        \r\n    }\r\n\r\n    update(bottom: any) {\r\n\r\n        this.moving += this.speed\r\n\r\n        this.y += 0.1*Math.sin(this.moving)\r\n\r\n        this.sprite.y = bottom - 50 + this.y\r\n        this.sprite.x = this.x\r\n\r\n    }\r\n}","export default class State {\r\n    stage: PIXI.Container\r\n\r\n    constructor() {\r\n        this.stage = new PIXI.Container()\r\n        this.stage.visible = false\r\n\r\n    }\r\n\r\n    show() {\r\n        this.stage.visible = true\r\n    }\r\n\r\n    hide() {\r\n        this.stage.visible = false\r\n    }\r\n}","import StorageService from '@/services/storage/StorageService'\r\nimport SetupService from '@/services/setup/SetupService'\r\nimport EmitService from '@/services/emit/EmitService'\r\nimport StatusService from '@/services/status/StatusService'\r\n\r\nexport default class Services {\r\n\r\n  history: any[]\r\n\r\n  setup: SetupService | any\r\n  storage: StorageService | any\r\n  emit: EmitService | any\r\n  status: StatusService | any\r\n\r\n\r\n  constructor(options: any) {\r\n    this.history = []\r\n    \r\n    this.storage = new StorageService()\r\n    this.setup = new SetupService(options)\r\n    this.emit = new EmitService(options.PORTS)\r\n    this.status = new StatusService()\r\n    \r\n    \r\n\r\n  }\r\n\r\n}\r\n\r\n","import Socket from \"./Socket/Socket\"\r\n\r\n\r\nexport default class EmitService {\r\n\r\n    socket: Socket | undefined\r\n\r\n    provider: any\r\n\r\n    store:  any\r\n\r\n    constructor(PORTS: any) {\r\n        this.socket = new Socket()\r\n\r\n        this.provider = 'kek'\r\n\r\n        this.store  = 'lol'\r\n    }\r\n\r\n    log() {\r\n        console.log(123)\r\n    }\r\n}","import { game } from \"@index\"\r\n\r\nimport GET_PLAYERS from \"./messages/GET_PLAYERS\"\r\nimport GET_NEW_PLAYER from \"./messages/GET_NEW_PLAYER\"\r\nimport PLAYER_MOVED from \"./messages/PLAYER_MOVED\"\r\nimport PLAYER_DISCONNECTED from \"./messages/PLAYER_DISCONNECTED\"\r\n\r\nexport default class Socket {\r\n    players: any\r\n    \r\n    url: string | any\r\n\r\n    API: WebSocket | any\r\n\r\n    connected: boolean\r\n\r\n    constructor() {\r\n        this.players = {}\r\n\r\n        this.url\r\n\r\n        this.API\r\n\r\n        this.connected = false\r\n\r\n    }\r\n\r\n    async changeTo(url: string) {\r\n        await this.close()\r\n        this.players = {}\r\n        this.open(url)\r\n    }\r\n\r\n    async open(url: string) {\r\n        this.url = url\r\n        \r\n        this.API = await new WebSocket(this.url)    \r\n        \r\n        this.API.onmessage = (e: any) => this.onMessage(e.data)\r\n        this.API.onopen = () => this.API.send(JSON.stringify({\r\n            type: 'open',\r\n            playerData: {\r\n                name: game.stack.playState.player.name,\r\n                cell: game.stack.playState.player.cell,\r\n                texture: game.stack.playState.player.texture,\r\n                textureX: game.stack.playState.player.textureX,\r\n                textureY: game.stack.playState.player.textureY\r\n            }\r\n        }));\r\n\r\n        this.connected = true\r\n        \r\n    }\r\n\r\n    close() {\r\n        this.connected = false\r\n        this.API.close()\r\n    }\r\n\r\n    async onMessage(data: any) { \r\n        const { type, message } = JSON.parse(data)\r\n\r\n        // if (type === 'action') {\r\n            \r\n        // } \r\n\r\n        if      (type === 'players') GET_PLAYERS (this, game.stack.playState, JSON.parse(data))\r\n        \r\n        else if (type === 'newPlayer') GET_NEW_PLAYER (this, game.stack.playState, JSON.parse(data))  \r\n            \r\n        else if (type === 'playerMoved') PLAYER_MOVED (this, game.stack.playState, JSON.parse(data))\r\n\r\n        else if (type === 'playerDisconected') PLAYER_DISCONNECTED (this, game.stack.playState, JSON.parse(data))\r\n\r\n    };\r\n} ","\r\nimport Player from '@/entities/actors/Player/Player'\r\n\r\nexport default function(socket: any, playState: any, data: any) {\r\n    \r\n    socket.players[data.message.name] = data.message\r\n    console.log(data)\r\n\r\n    let newPlayer = new Player(socket.players[data.message.name])\r\n    newPlayer.sprite.parentGroup = playState.actorsGroup\r\n    playState.map.actors.push(newPlayer)\r\n\r\n    playState.stage.addChild(newPlayer.sprite)\r\n\r\n    playState.resize()\r\n    playState.pivot()\r\n}\r\n\r\n","\r\nimport Player from '@/entities/actors/Player/Player'\r\n\r\nexport default function(players: any, playState: any, data: any) {\r\n    players = data.message\r\n            \r\n            \r\n    for (let player in players) {\r\n        \r\n        playState.map.actors.push(new Player(players[player]))\r\n        \r\n    }\r\n\r\n    playState.stage.addChild(playState.map.layers.after)\r\n    \r\n    playState.map.actors.forEach((actor: any) => {\r\n        console.log(actor)\r\n        actor.sprite.parentGroup = playState.actorsGroup\r\n        playState.stage.addChild(actor.sprite)\r\n\r\n        actor.occupy(playState)\r\n    })\r\n\r\n    playState.stage.addChild(playState.map.layers.before)\r\n\r\n    playState.resize()\r\n    playState.pivot()\r\n    \r\n}\r\n","\r\n\r\nexport default function(socket: any, playState: any, data: any) {\r\n    \r\n    delete socket.players[data.message]\r\n\r\n    let player = playState.map.actors.find((actor: any) => {\r\n        return actor.name === data.message && actor.constructor.name === 'Player'\r\n    })\r\n\r\n    playState.stage.removeChild(player.sprite)\r\n\r\n    playState.map.actors = playState.map.actors.filter((actor: any) => {\r\n        return actor !== player\r\n        \r\n    })\r\n\r\n    \r\n            \r\n}","export default function(socket: any, playState: any, data: any) {\r\n    socket.players[data.message.name] = data.message\r\n\r\n    \r\n    let player = playState.map.actors.find((actor: any) => {\r\n        return actor.name === data.message.name && actor.constructor.name === 'Player'\r\n    })\r\n\r\n    player.move(socket.players[data.message.name].cell)\r\n\r\n    // playState\r\n\r\n}","import {game} from '@index'\r\n\r\nimport _loadPreviewAsset from './supplements/_loadPreviewAsset'\r\n\r\nimport _loadPlayer from './supplements/_loadPlayer'\r\nimport _loadTilesets from './supplements/_loadTilesets'\r\nimport _loadMaps from './supplements/_loadMaps'\r\n\r\nimport _createTextures from './supplements/_createTextures'\r\nimport _createLocations from './supplements/_createLocations'\r\n\r\nimport _build from './supplements/_build'\r\n\r\n\r\n\r\nexport default class SetupService {\r\n\r\n    static loader = () => new PIXI.Loader()\r\n    \r\n    static xhrTypes = {\r\n        JSON: PIXI.LoaderResource.XHR_RESPONSE_TYPE.JSON,\r\n        BLOB: PIXI.LoaderResource.XHR_RESPONSE_TYPE.BLOB\r\n    }\r\n    \r\n    options: any\r\n\r\n    constructor(options: any) {\r\n        \r\n        this.options = options\r\n        \r\n    }\r\n\r\n    loadPreviewAsset() {\r\n        return _loadPreviewAsset(\r\n            SetupService.loader(),\r\n            SetupService.xhrTypes, \r\n            game.services.storage\r\n        )\r\n    }\r\n\r\n    loadPlayer() {\r\n        return _loadPlayer(\r\n            SetupService.loader(), \r\n            SetupService.xhrTypes, \r\n            game.services.storage,\r\n            this.options\r\n        )\r\n    }\r\n        \r\n    loadTilesets(tilesets: any[]) {\r\n        return _loadTilesets(\r\n            SetupService.loader(), \r\n            SetupService.xhrTypes, \r\n            game.services.storage, \r\n            this.options,\r\n            tilesets\r\n        )\r\n    }\r\n\r\n    // loadCharacters() {}\r\n\r\n    // loadPortrets() {}\r\n\r\n    loadMaps(maps: any[] = game.services.storage.player.adjacentMaps) {\r\n        return _loadMaps(\r\n            SetupService.loader(),\r\n            SetupService.xhrTypes,\r\n            game.services.storage,\r\n            this.options,\r\n            maps\r\n        )\r\n    }\r\n\r\n    createTextures() {\r\n        return _createTextures(\r\n            game.services.storage\r\n        )\r\n    }\r\n\r\n    createLocations() {\r\n        return _createLocations(\r\n            game.services.storage\r\n        )\r\n    }\r\n\r\n\r\n    build() {\r\n        return _build(game)\r\n    }\r\n\r\n}","import Game from \"@/Game\";\r\nimport Hero from \"@/entities/actors/Hero/Hero\";\r\n\r\nexport default async function(game: Game) {\r\n\r\n    if(game.services.status.builded) return\r\n\r\n    game.stack.stage.addChild(new PIXI.display.Layer(game.stack.playState.actorsGroup))\r\n\r\n    game.stack.playState.player = new Hero(game.services.storage.player)\r\n    console.log(game.services.storage.player)\r\n    game.stack.playState.target = game.stack.playState.player\r\n    game.stack.playState.target.isTarget = true\r\n\r\n    game.stack.playState.map = game.services.storage.locations[game.stack.playState.player.location]\r\n    game.stack.playState.map.actors.push(game.stack.playState.player)\r\n    \r\n    game.services.emit.socket.open(game.stack.playState.map.port)\r\n    \r\n    \r\n    // game.stack.playState.stage.addChild(game.stack.playState.map.layers.after)\r\n\r\n    // game.services.emit.socket.\r\n\r\n    // game.stack.playState.map.actors.forEach((actor: any) => {\r\n    //     actor.sprite.parentGroup = game.stack.playState.actorsGroup\r\n    //     game.stack.playState.stage.addChild(actor.sprite)\r\n\r\n    //     actor.occupy(game.stack.playState)\r\n    // })\r\n    \r\n    // game.stack.playState.stage.addChild(game.stack.playState.map.layers.before)\r\n\r\n    game.stack.playState.resize()\r\n    game.stack.playState.pivot()\r\n    \r\n    \r\n    game.stack.startState.hide()\r\n    game.engine.remove(game.engine.loops.preview.loop)\r\n    game.stack.stage.filters = []\r\n\r\n    game.stack.playState.show()\r\n    game.stack.GUI.show()\r\n    game.stack.GUI.HUD.resize()\r\n    \r\n    game.engine.add(game.engine.loops.game.loop)\r\n\r\n    \r\n    game.controller.bindKeys()\r\n    window.addEventListener('keyup',   (event) => game.controller.keyDownUp(event))\r\n    window.addEventListener('keydown', (event) => game.controller.keyDownUp(event))\r\n\r\n    game.services.status.builded = true\r\n    \r\n}","import Friend from \"@/entities/actors/NPC/Friend/Friend\"\r\nimport Enemy from \"@/entities/actors/NPC/Enemy/Enemy\"\r\n\r\nexport default function (storage: any) {\r\n    return new Promise((resolve) => {\r\n        for(let json in storage._maps) {\r\n          \r\n\r\n            let {name} = storage._maps[json]\r\n            \r\n            if(name in storage.locations) continue\r\n            \r\n            let map = JSON.parse(storage._maps[json].data)\r\n            \r\n         \r\n            let props: any = {}\r\n        \r\n            if('properties' in map) {\r\n                \r\n                for(let property of map.properties) {\r\n                    props[property.name] = property.value\r\n                }\r\n\r\n            }\r\n        \r\n            /* apply basic textures in proper order */\r\n            let texturesArray: any[] = [null]\r\n            for(let set of map.tilesets) {\r\n                texturesArray = texturesArray.concat(storage.textures.landscape[set.source])\r\n            }\r\n        \r\n        \r\n            /* collision initialize */\r\n            let collision: any[] = []\r\n        \r\n            for(let c = 0; c < map.height; c++) {\r\n                collision[c] = []\r\n\r\n                for(let r = 0; r < map.width; r++) {\r\n                    collision[c][r] = 1\r\n                }\r\n\r\n            } \r\n        \r\n            /* map layers initialization */\r\n            let afterLayer = new PIXI.tilemap.CompositeRectTileLayer(16, texturesArray)\r\n            let beforeLayer = new PIXI.tilemap.CompositeRectTileLayer(16, texturesArray)\r\n        \r\n            let objects: any = {\r\n              adjacent: {},\r\n              actors: []\r\n            }\r\n            \r\n            /* drawing frames on map and register map objects */\r\n            map.layers.filter((layer: any) => 'objects' in layer)\r\n            .forEach((layer: any) => registerObject(layer, objects))\r\n        \r\n            map.layers.filter((layer: any) => 'data' in layer)\r\n            .forEach((layer: any) => {\r\n        \r\n                let props: any = {}\r\n            \r\n                for(let property of layer.properties) {\r\n                    props[property.name] = property.value\r\n                }\r\n        \r\n                let temp = layer.name.includes('Before') ? beforeLayer : afterLayer\r\n            \r\n                for(let t = 0; t < layer.data.length; t++) {\r\n            \r\n                    if(layer.data[t]) {\r\n            \r\n                        let col = Math.floor(t / layer.width)\r\n                        let row = t % layer.width\r\n                \r\n                        temp.addFrame(layer.data[t], row * map.tilewidth, col * map.tileheight)\r\n                        \r\n                        /* add collision */\r\n                        if(props.collision) collision[col][row] = 0\r\n            \r\n                    }\r\n                    \r\n                }\r\n            })\r\n        \r\n        \r\n            /* cache map into \"maps\" object */\r\n            storage.locations[name] = {\r\n                layers: {\r\n                    after: afterLayer,\r\n                    before: beforeLayer\r\n                },\r\n                collision,\r\n                size: {\r\n                    w: map.width,\r\n                    h: map.height\r\n                },\r\n                adjacent: objects.adjacent,\r\n                actors: objects.actors,\r\n                port: objects.port,\r\n                lesson: props.lesson ? 'lesson' : null\r\n            }\r\n        }\r\n        \r\n        console.log('createLocations')\r\n        return resolve()\r\n    })\r\n}\r\n\r\nfunction registerObject(layer: any, objects: any) {\r\n    const {name} = layer\r\n    \r\n    \r\n    \r\n    switch(name) {\r\n      case 'locations': {\r\n        for(let location of layer.objects) {\r\n  \r\n          let props: any = {}\r\n  \r\n          for(let property of location.properties) {\r\n            props[property.name] = property.value\r\n          }\r\n  \r\n  \r\n          objects.adjacent[location.name] = {\r\n            entry: {\r\n              x: location.x / 16,\r\n              y: location.y / 16\r\n            },\r\n            to: {\r\n              x: props.cellX,\r\n              y: props.cellY\r\n            }\r\n            \r\n          }\r\n        }\r\n        break\r\n      }\r\n      case 'actors': {\r\n        for(let actor of layer.objects) {\r\n  \r\n          let props: any = {}\r\n  \r\n          for(let property of actor.properties) {\r\n            props[property.name] = property.value\r\n          }\r\n  \r\n  \r\n          let data = {\r\n            name: actor.name,\r\n            cell: {\r\n              x: actor.x / 16,\r\n              y: actor.y / 16\r\n            }\r\n          }\r\n  \r\n       \r\n          props.type === 'friend'\r\n  \r\n          ? objects.actors.push(new Friend(Object.assign(data, props)))\r\n          : objects.actors.push(new Enemy(Object.assign(data, props)))\r\n        }\r\n        break\r\n      } case 'port': {\r\n        // console.log(layer.objects)\r\n        objects.port = 'ws://localhost:' + layer.objects\r\n        // console.log(objects)\r\n      }\r\n    }\r\n    \r\n  }","export default function (storage: any) {\r\n    return new Promise((resolve) => {\r\n        for (let category in storage._tilesets) {\r\n            \r\n            for (let tileset in storage._tilesets[category]) {\r\n                if(tileset in storage.textures[category]) continue\r\n    \r\n                let {texture, data, metadata} = storage._tilesets[category][tileset]\r\n                \r\n                let baseTexture = PIXI.BaseTexture.from(data)\r\n            \r\n                storage.textures[category][tileset] = []\r\n            \r\n                for (let c = 0; c < texture.orig.height  / metadata.h; c++) {\r\n                    for (let r = 0; r < texture.orig.width / metadata.w; r++) {\r\n                        let texture = new PIXI.Texture(\r\n                            baseTexture, \r\n                            new PIXI.Rectangle(r * metadata.w, c * metadata.h, metadata.w, metadata.h)\r\n                        )\r\n            \r\n                        storage.textures[category][tileset].push(texture)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n        console.log('createTexture')\r\n        return resolve()\r\n    })\r\n}","export default function(loader: PIXI.Loader | any, xhrType: any, storage: any, options: any, maps: any) {\r\nreturn new Promise((resolve) => {\r\n    \r\n    for(let map of maps) {\r\n        if(map in storage._maps) continue\r\n        loader.add(`${map}`, `http://localhost:${options.PORTS.PROVIDER}/maps/${map}`, xhrType.JSON)\r\n    }\r\n    \r\n    loader.load((_: any, maps: any) => {\r\n\r\n        for(let map in maps) storage._maps[map] = maps[map]\r\n        \r\n        console.log('loadMaps')\r\n        return resolve()\r\n    })\r\n})\r\n\r\n}","export default function(loader: PIXI.Loader | any, xhrType: any, storage: any, OPTIONS: any) {\r\nreturn new Promise((resolve) => loader\r\n\r\n.add('player', `http://localhost:${OPTIONS.PORTS.PROVIDER}/player`, { xhrType: xhrType.JSON })\r\n\r\n.load((_: any, json: any) => {\r\n\r\n    storage.player = json.player.data; \r\n    \r\n    console.log('loadPlayer'); \r\n    return resolve()\r\n}))\r\n\r\n}","export default function(loader: PIXI.Loader | any, xhrType: any, storage: any) {\r\n    return new Promise((resolve) => loader\r\n    \r\n    .add('player', 'http://localhost:8080/player', { xhrType: xhrType.BLOB })\r\n    \r\n    .load((_: any, json: any) => {\r\n    \r\n        storage.player = json.player.data; \r\n        \r\n        console.log('loadPlayer'); \r\n        return resolve()\r\n    }))\r\n    \r\n    }","export default function(loader: PIXI.Loader | any, xhrType: any, storage: any, options: any, tilesets: any[]) {\r\n    return new Promise((resolve) => {\r\n        \r\n        for(let tileset of tilesets) {\r\n\r\n            let category = tileset.url.slice(31, -tileset.tag.length - 1)\r\n            \r\n\r\n            if(tileset in storage._tilesets[category]) continue\r\n\r\n            loader.add(tileset.tag, tileset.url, \r\n                { \r\n                    xhrType: xhrType.BLOB, \r\n                    metadata: Object.assign(options.GAME_OPTIONS[category], {category}) \r\n                }\r\n            )\r\n            \r\n        }\r\n\r\n        loader.load((_: any, tilesets: any) => {\r\n\r\n            for(let tileset in tilesets) {\r\n                storage._tilesets[tilesets[tileset].metadata.category][tileset] = tilesets[tileset]\r\n            }\r\n            \r\n            console.log('loadTilesets')\r\n            resolve()\r\n        })\r\n\r\n    })\r\n}\r\n","export default class StatusService {\r\n\r\n    builded: boolean\r\n\r\n    setupProgress: number\r\n\r\n    constructor() {\r\n\r\n        this.builded = false\r\n\r\n        this.setupProgress = 0\r\n\r\n    }\r\n\r\n}","export default class StorageService {\r\n        \r\n        player: any\r\n\r\n        textures: any\r\n        locations: any\r\n        \r\n        _tilesets: any\r\n        _maps: any\r\n\r\n        \r\n    constructor() {\r\n\r\n        this.player\r\n  \r\n        this._maps = {}\r\n        this.locations = {}\r\n\r\n        this._tilesets = {\r\n            landscape: {},\r\n            animated: {},\r\n            actors: {},\r\n            portrets: {}\r\n        } \r\n        \r\n        this.textures = {\r\n            landscape: {},\r\n            animated: {},\r\n            actors: {},\r\n            portrets: {}\r\n        }\r\n        \r\n    }\r\n\r\n    getRaw() {\r\n        return {\r\n            player: this.player,\r\n            tilesets: this._tilesets,\r\n            maps: this._maps\r\n        }\r\n    }\r\n\r\n    getProcessed() {\r\n        return {\r\n            player: this.player,\r\n            textures: this.textures,\r\n            locations: this.locations\r\n        }\r\n    }\r\n}","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1598623255936\n      var cssReload = require(\"C:/Users/ /Desktop/game  /client/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"reloadAll\":true,\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}